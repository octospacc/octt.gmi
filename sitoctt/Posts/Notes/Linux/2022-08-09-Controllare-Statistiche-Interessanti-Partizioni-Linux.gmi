# sitoctt
Alcune informazioni importanti sono disponibili su:
=> /octt/index.gmi octocapsula/index

üè† ~Home~
üò∫ Chi sono
üí∞ Donazioni
üìÖ Diarylog
üíæ Devlogs
üíé OctoSpacc Hub
üîñÔ∏è Bacheca (Old)
üì¶ OcttKB
‚úâÔ∏è PicoBlog
üóÇÔ∏è Raccolte üììÔ∏è Blog
üõ†Ô∏è DIY
‚ôªÔ∏è Ecologia
ü¶Ñ Fritto Misto
üïπÔ∏è Gaming
üåêÔ∏è Internet
üìí MicroBlog
üì±Ô∏è Mobile
üìùÔ∏è Note
üí∞ Rasperino
üì° Tecnologia

=> ../../../index.gmi  
=> ../../../Chi-Sono.gmi  
=> ../../../Donazioni.gmi  
=> ../../../Diarylog.gmi  
=> ../../../Devlogs.gmi  
=> https://hub.octt.eu.org  üíé OctoSpacc Hub
=> https://octtspacc.gitlab.io/bachecoctt  üîñÔ∏è Bacheca (Old)
=> https://kb.octt.eu.org  üì¶ OcttKB
=> ../../../PicoBlog.gmi  
=> ../../../Categories/Blog.gmi  
=> ../../../Categories/DIY.gmi  
=> ../../../Categories/Ecologia.gmi  
=> ../../../Categories/Fritto-Misto.gmi  
=> ../../../Categories/Gaming.gmi  
=> ../../../Categories/Internet.gmi  
=> ../../../Categories/MicroBlog.gmi  
=> ../../../Categories/Mobile.gmi  
=> ../../../Categories/Note.gmi  
=> ../../../Categories/Rasperino.gmi  
=> ../../../Categories/Tecnologia.gmi  

# ¬ª
Controllare statistiche interessanti e sulla salute di partizioni su Linux

Le memorie di archiviazione, di qualunque categoria siano, con l'usura si degradano.
Niente si pu√≤ fare per evitare di doverle cambiare, prima o poi, dopo tanti anni. √à per√≤ possibile tenere d'occhio il loro stato di salute, per poter identificare eventuali problemi.

Quando si parla di dischi HDD o SSD, il protocollo SMART
corre in aiuto ma, se, come me, si usano i computer in maniera poco convenzionale, allora il controllare dischi classici non basta.

=> https://en.m.wikipedia.org/wiki/S.M.A.R.T.  SMART

## ¬ª
Linux va oltre

Un qualcosa di abbastanza segreto, che non molti sanno (cos√¨ mi √® parso, almeno), √® che su Linux √® possibile accedere alle statistiche di partizioni con alcuni filesystem.
Ci√≤, ovviamente, in modo indipendente da se si stia usando una pennetta, una scheda SD, un disco rigido, un floppy disk, o anche una memoria ancora meno usuale.

Ext4
fornisce diversi dati curiosi - e lo stesso dovrebbero fare anche le sue versioni precedenti, Ext3 ed Ext2, ma non ho controllato.
Anche F2FS
ho visto, direttamente dal mio smartphone Android, espone delle informazioni interessanti.. che non affronter√≤ in dettaglio, perch√© sono tutte molto oscure e non so cosa significhino; e se non so cosa significano, non sono per me curiose. Capita.
Per quanto riguarda altri file system, non ho visto proprio. Come compito per casa, quindi, vi do quello di vedere se roba come FAT32, exFAT, NTFS, o perch√© no, BTRFS, espone informazioni belline, su Linux. E come?

=> https://en.m.wikipedia.org/wiki/Ext4  Ext4
=> https://en.m.wikipedia.org/wiki/F2FS  F2FS

## ¬ª
Ottenere i dati

Su Linux, basta navigare nei percorsi /sys/fs/<filesystem>/<device> per trovare qualche file interessante.
Si pu√≤ stampare a schermo il contenuto di ciascuno, affiancato al suo nome, con un semplice comando (eseguito nel relativo percorso): for i in *; do echo "$i: $(cat $i)"; done. A meno di avere SELinux attivo - in genere, di default lo √® solo sui dispositivi Android, non sui sistemi desktop - non servono nemmeno i permessi di root.
Metto qui sotto in tabella i pi√π interessanti, riguardanti la microSD del mio server (una povera Nintendo Switch che fa girare Ubuntu senza sosta), ci torneremo tra poco.

‚äû table ‚äû

Nome Valore
errors_count 0
first_error_time 0
last_error_time 0
lifetime_write_kbytes 1959125105
session_write_kbytes 1423172308

Parlando nello specifico dei file system Ext: per conoscere persino qualche dettaglio in pi√π, e affiancato da un nome comprensibile, ci sarebbe anche il comando tune2fs -l /dev/<device>. Questo richiede per√≤ i permessi di root e, mentre riporta anche alcuni dei dati che si possono ottenere sbirciando i file di prima, come il numero di lifetime_write, questi possono essere non aggiornati, e relativi solo all'ultimo montaggio della partizione. Quindi, meglio prestare attenzione a questi.
Anche stavolta, riporto le cose interessanti.

‚äû table ‚äû

Nome Valore
Filesystem created Mon Jul 26 04:33:17 2021
Last mount time Fri Apr 15 11:55:30 2022
Mount count 16

## ¬ª
Cose da osservare

Vediamo, uno per uno, l'utilit√† di questi valori.
Bisogna tenere in conto, per√≤, nel caso non si fosse capito, che i valori parlano dello stato della partizione, non del media di archiviazione. Possiamo leggerli solo perch√© Ext4 li salva e, di conseguenza, se la partizione viene formattata, allora anche questi valori si resettano. Inoltre, consideriamo che potrebbero tranquillamente essere alterati da chiunque con programmi semplici come tune2fs, quindi non sono dati da prendere come perfettamente buoni se persone non fidate hanno accesso alla memoria.

‚Ä¢ Filesystem created : La data di creazione della partizione. Semplice, ma pu√≤ tornare utile per fare stime sulla salute, assieme ai prossimi dati. ‚Ä¢ Mount count : Il numero di volte in cui la partizione √® stata montata. Questo pu√≤ essere interessante, se parliamo di una memoria che non √® usata in modo permanente su una macchina sempre accesa. Se non esistesse SMART, che d√† questo e anche pi√π dati, questo valore sarebbe molto utile sugli HDD. ‚Ä¢ Last mount time : La data dell'ultimo montaggio della partizione. Ci pu√≤ servire in combinazione con altri dati, e basta, credo. ‚Ä¢ session_write_kbytes : La quantit√†, in KB, di dati scritti durante la sessione corrente, ossia dal momento dell'ultimo montaggio. Assieme al valore descritto appena sopra, possiamo usare questo per sapere quanto abbiamo scritto in un periodo di tempo attivo (il corrente). ‚Ä¢ lifetime_write_kbytes : La quantit√†, in KB, di dati scritti da quando la partizione √® stata creata. Questa informazione √® particolarmente utile sulle microSD, almeno se se ne fa un uso intensivo come me. C'√® anche su F2FS. ‚Ä¢ errors_count : Il numero di errori, credo sia di lettura che di scrittura, avvenuti nel tempo. Errori frequenti possono essere sintomo di una memoria inaffidabile o semplicemente degradata. ‚Ä¢ first_error_time e last_error_time : Date, rispettivamente della prima e dell'ultima volta in cui un errore √® stato registrato. Pu√≤ essere utile a capire se eventuali errori capitano di continuo, e quindi bisogna investigare oltre; oppure, se un errore √® capitato una volta e poi mai pi√π dopo molto tempo, e quindi si sta bene cos√¨.

## ¬ª
Quando serve controllare la salute cos√¨?

Bene, OK, queste informazioni sono interessanti, ma: quando servono effettivamente?

Se la memoria di archiviazione in uso - che, se abbiamo deciso di ricorrere a queste misure anzich√© usare SMART, √® probabilmente una microSD o una chiavetta - inizia a dare segni di cedimento, magari rallentandosi nel tempo, oppure corrompendo dati.. Sarebbe opportuno almeno controllare che sia tutto a posto.

Se poi i dati non fanno paura, ma sembrano in regola.. allora √® il caso prima di fare una formattazione completa (incluso il ricreare la tabella delle partizioni da zero), cosa resa semplice da programmi come GParted
, e poi si vede come continua la storia.

=> https://gparted.org  GParted

In ogni caso, giusto per scrupolo, sarebbe bene fare sempre controlli di routine, cos√¨ da poter prevedere problemi prima che accada qualcosa di grave.

## ¬ª
Tenere d'occhio le microSD?

Parlando di schede microSD: sono quasi usa e getta, hanno una vita estremamente limitata, visto che i loro chip di memoria sono gli scarti degli scarti della fabbricazione di altre memorie, di gamma pi√π alta, come gli SSD.

Sulla loro effettiva durata, almeno di quelle uscite bene dalla fabbrica e non di sottomarche, cosa si sa?
Se ne leggono di tutti i colori online: chi dice che ogni singola cella di memoria resiste 10000 riscritture, chi dice che puoi al massimo scrivere 1000 volte la capacit√† della memoria prima che questa fallisca completamente (andando in modalit√† di sola lettura)... non si arriva ad alcuna conclusione.

Ho avuto schede come quella esaminata oggi, della capacit√† di 32 GB, che, a parte i quasi 2 TB scritti dall'ultima formattazione, secondo me minimo 3 TB totali in tutta la sua vita li ha visti, eppure sembra ancora a posto; e poi, ho avuto schede che hanno iniziato a dare problemi per molto meno. Sar√† che quest'ultime le ho usate con file system schifosi per√≤, come FAT32 o exFAT, e per questo si corrompevano in continuazione.

In conclusione: se abusiamo di schedine, √® bene riuscire a controllarle, nei limiti del possibile, nel modo in cui abbiamo imparato oggi.
