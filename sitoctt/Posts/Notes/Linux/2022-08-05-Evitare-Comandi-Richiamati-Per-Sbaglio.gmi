# sitoctt
Alcune informazioni importanti sono disponibili su:
=> /octt/index.gmi octocapsula/index

üè† ~Home~
üò∫ Chi sono
üí∞ Donazioni
üíæ Devlogs
‚úâÔ∏è PicoBlog
üíé OctoSpacc Hub
üîñÔ∏è Bacheca (Old)
üì¶ OcttKB
üóÇÔ∏è Raccolte üììÔ∏è Blog
üìí MicroBlog
üõ†Ô∏è DIY
‚ôªÔ∏è Ecologia
ü¶Ñ Fritto Misto
üïπÔ∏è Gaming
üåêÔ∏è Internet
üì±Ô∏è Mobile
üìùÔ∏è Note
üí∞ Rasperino
üì° Tecnologia

=> ../../../index.gmi  
=> ../../../Chi-Sono.gmi  
=> ../../../Donazioni.gmi  
=> ../../../Devlogs.gmi  
=> ../../../PicoBlog.gmi  
=> https://hub.octt.eu.org  üíé OctoSpacc Hub
=> https://octtspacc.gitlab.io/bachecoctt  üîñÔ∏è Bacheca (Old)
=> https://kb.octt.eu.org  üì¶ OcttKB
=> ../../../Categories/Blog.gmi  
=> ../../../Categories/MicroBlog.gmi  
=> ../../../Categories/DIY.gmi  
=> ../../../Categories/Ecologia.gmi  
=> ../../../Categories/Fritto-Misto.gmi  
=> ../../../Categories/Gaming.gmi  
=> ../../../Categories/Internet.gmi  
=> ../../../Categories/Mobile.gmi  
=> ../../../Categories/Note.gmi  
=> ../../../Categories/Rasperino.gmi  
=> ../../../Categories/Tecnologia.gmi  

# ¬ª
Evitare di richiamare comandi per sbaglio nel terminale

Lavorando nel terminale, magari allo sviluppo di programmi, mi capita spesso di richiamare per sbaglio un comando che non dovrei.

Ci√≤ mi succede perch√© lavoro in questo modo: modifico qualcosa nella finestra del mio editor di testo di fiducia, quindi passo alla finestra del terminale, e premo [Freccia Su] (che richiama l'ultimo comando eseguito) ed [Invio] per eseguirlo.

Quello che ho notato √® che certe volte, nella fretta, mi capita di premere una volta di troppo [Freccia Su], cosa che richiama il penultimo comando eseguito, o quello ancora prima.
Visto che praticamente queste sequenze di azioni le faccio quasi in automatico, senza leggere per accertarmi che il comando selezionato sia effettivamente quello che voglio prima di premere [Invio] (perch√© solo quello mi aspetto), accade diverse volte che io esegua un comando che non dovrei: spesso, si tratta del comando per fare un commit Git
delle mie modifiche alla cartella di lavoro, e subito caricarle in cloud.

=> https://en.wikipedia.org/wiki/Git  Git

Ora, questa cosa non va bene, perch√© significa che nella cronologia di Git avr√≤ certi punti "sbagliati": con descrizioni dal testo duplicato, e il codice in uno stato inadatto, non funzionante, perch√© ero nel pieno di testare alcune modifiche.
Avere una cronologia di Git cos√¨ conciata intacca decisamente la sua qualit√†, perch√© √® pi√π difficile trovare un punto specifico passato del codice in futuro, cosa che nullifica una delle funzionalit√† utili di Git - e in generale √® qualcosa che non mi piace, mi da fastidio, vedere la cronologia sporca.

## ¬ª
Lo script

Per risolvere il problema, mi sono inventata questo scriptino (testato con sh e bash), l'idea √® di avviare i comandi "pericolosi" attraverso di lui nelle situazioni in cui devo fare quelle mie mosse con il terminale (ma, volendo, lo si pu√≤ impostare come alias per richiamarlo in maniera implicita sempre per un dato comando).

```
Profile="~/.bashrc"

a=${RANDOM: -1}
b=${RANDOM: -1}

echo "[!] Confirm your command"
echo "[?] $a + $b = ?"
read Input

if [ "$Input" -eq "$((a+b))" ] 2>/dev/null
then
   $SHELL -c "source "$Profile"; $@"
else
   echo "[!] Wrong input"
fi

```

## ¬ª
Come si usa

Ho salvato il codice all'interno di una funzione function comconf() { } nel mio file di profilo bash.
Ora, quando devo eseguire un comando marso, mi basta fare comconf '<comando>'; il programma mi chieder√† di scrivere il risultato di un'operazione aritmetica semplice generata casualmente, e solo se ci√≤ che scrivo √® giusto (quindi, solo se sto prestando attenzione) il mio comando verr√† eseguito.

```
$ # Esempio
$ comconf 'echo "Prova"; echo "Provina"'
[!] Confirm your command
[?] 1 + 3 = ?
4
Prova
Provina
$

```

Lo script ha qualche aspetto strano, per esempio il fatto che non funziona se eseguito direttamente dalla shell corrente (ed √® per questo che esegue il comando desiderato in un altro processo di shell, con l'argomento -c). Per questo motivo, devo anche caricare esplicitamente il mio file di profilo nella nuova shell, perch√© non viene fatto in automatico e l√¨ ho altri alias e funzioni che mi servono.
Come se non bastasse, se non uso i singoli apici per racchiudere il comando che voglio chiamare, se questo contiene altri apici √® come se questi venissero ignorati, e quindi il comando finale si pu√≤ rompere.

Vabbe, problema risolto ad ogni modo. Niente pi√π incidenti a causa di un [Freccia Su] di troppo.
